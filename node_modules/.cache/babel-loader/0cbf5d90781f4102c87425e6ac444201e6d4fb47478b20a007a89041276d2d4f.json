{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jazmin/Desktop/CLOUD/Fronted_final/P_REACT/zaay/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jazmin/Desktop/CLOUD/Fronted_final/P_REACT/zaay/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Jazmin/Desktop/CLOUD/Fronted_final/P_REACT/zaay/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Mi_Carrito=function Mi_Carrito(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),compras=_useState2[0],setCompras=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),mensaje=_useState4[0],setMensaje=_useState4[1];var _useState5=useState(localStorage.getItem('userId')),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];// Simulando el inicio de sesión y guardando el ID del usuario\n// Este sería el ID del usuario logueado, puede ser dinámico\nuseEffect(function(){if(userId){obtenerCompras();}},[userId]);var obtenerCompras=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,usuario;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://lb-proyecto-1789007519.us-east-1.elb.amazonaws.com:8082/cliente');case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;usuario=data.find(function(user){return user.id==userId;});if(usuario&&usuario.compras.length>0){setCompras(usuario.compras);setMensaje('');}else{setCompras([]);setMensaje('No tienes compras registradas.');}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error('Error al obtener las compras:',_context.t0);setMensaje('Hubo un error al obtener las compras.');case 15:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function obtenerCompras(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:userId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:obtenerCompras,children:\"Ver Carrito\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"carritoCompras\",children:[mensaje&&/*#__PURE__*/_jsx(\"p\",{children:mensaje}),compras.map(function(compra){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"ID Compra: \",compra.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Fecha: \",compra.fecha_compra]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Monto Total: \",compra.monto_Total]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"M\\xE9todo de Pago: \",compra.metodo_de_pago]}),/*#__PURE__*/_jsx(\"hr\",{})]},compra.id);})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Por favor, inicia sesi\\xF3n para ver tu carrito.\"})});};export default Mi_Carrito;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Mi_Carrito","_useState","_useState2","_slicedToArray","compras","setCompras","_useState3","_useState4","mensaje","setMensaje","_useState5","localStorage","getItem","_useState6","userId","setUserId","obtenerCompras","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","usuario","wrap","_callee$","_context","prev","next","fetch","sent","json","find","user","id","length","t0","console","error","stop","apply","arguments","children","onClick","map","compra","fecha_compra","monto_Total","metodo_de_pago"],"sources":["C:/Users/Jazmin/Desktop/CLOUD/Fronted_final/P_REACT/zaay/src/componente/mi_carrito.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst Mi_Carrito = () => {\r\n    const [compras, setCompras] = useState([]);\r\n    const [mensaje, setMensaje] = useState('');\r\n    const [userId, setUserId] = useState(localStorage.getItem('userId'));\r\n  \r\n    // Simulando el inicio de sesión y guardando el ID del usuario\r\n     // Este sería el ID del usuario logueado, puede ser dinámico\r\n  \r\n     useEffect(() => {\r\n        if (userId) {\r\n          obtenerCompras();\r\n        }\r\n      }, [userId]);\r\n  \r\n      const obtenerCompras = async () => {\r\n        try {\r\n          const response = await fetch('http://lb-proyecto-1789007519.us-east-1.elb.amazonaws.com:8082/cliente');\r\n          const data = await response.json();\r\n          \r\n          const usuario = data.find(user => user.id == userId);\r\n          \r\n          if (usuario && usuario.compras.length > 0) {\r\n            setCompras(usuario.compras);\r\n            setMensaje('');\r\n          } else {\r\n            setCompras([]);\r\n            setMensaje('No tienes compras registradas.');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error al obtener las compras:', error);\r\n          setMensaje('Hubo un error al obtener las compras.');\r\n        }\r\n      };\r\n    \r\n      return (\r\n        <div>\r\n          {userId ? (\r\n            <>\r\n              <button onClick={obtenerCompras}>Ver Carrito</button>\r\n              <div id=\"carritoCompras\">\r\n                {mensaje && <p>{mensaje}</p>}\r\n                {compras.map(compra => (\r\n                  <div key={compra.id}>\r\n                    <p>ID Compra: {compra.id}</p>\r\n                    <p>Fecha: {compra.fecha_compra}</p>\r\n                    <p>Monto Total: {compra.monto_Total}</p>\r\n                    <p>Método de Pago: {compra.metodo_de_pago}</p>\r\n                    <hr />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <p>Por favor, inicia sesión para ver tu carrito.</p>\r\n          )}\r\n        </div>\r\n      );\r\n    };\r\n  \r\n  export default Mi_Carrito;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}